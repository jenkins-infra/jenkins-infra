---
lookup_options:
  "^profile::jenkinscontroller::jcasc$":
    merge:
      strategy: deep
      merge_hash_arrays: true

accounts:
  basil:
    ssh_keys:
      basil:
        key: AAAAB3NzaC1yc2EAAAADAQABAAACAQCkR0yiRuFiY82o1IUyglIFAGLlkqXfuIv/zGU8x/BWvjHBUetM4LLdVTT21lagee85wSKEPEhwBHd0NpSKZQj/iXlhHt5IQQAt0ZKuJYNHtbIUXPEue4bpHssn58tNsbtIvgEKoLkbqkjRbSTceT9yB8FLS9fYleFtwxera/1S7L8U0if9idfCibJhmxI91K+lKT+PMvQ3SS/9KGlOae0t9UfN+TT2YKLWa74Pi4QYrATDny3F8+ad4xeW6Tzour9yVWEXbXab1u7yXZcBwpQpCPMc9xSuP8/gomRum5Cw2M1dKSGi7UX7K03hWPr7F68zIQ8CkD/NZyJDj9R4QxTEDRINYpAznig8GRklbECvBLE5nenQ7hT6vTv7cWf0JBotrpoGOJHcK2vcEjDPu9nhtsB+sZp/BvTiFLvZSmNDgkrNOHRZaI5dbREkgBJrYYsFnfJNf7/+6BrbKpBa4rRHl7OfYnlLrcw7xWR8XZeKA8y80521oPpm7XMDij/yNbAqxWpxJfukbHIM7ouUo2mV+FsuSpkDh8w9ab5F4HkJs3jlMRtrYy0IV0HKPFZ57ILGUpHTdod1rwvUnF7/MeX3I2lqS56YbzCYpnhBsJ41Hai07V7GVa7cFaRUNWgHRtu2GN/rg7RaFFdCBRSxY6B2qyyJEWt7mNj5mXSm37JO8Q==
    groups:
      - sudo
  wfollonier:
    ssh_keys:
      wfollonier:
        key: AAAAB3NzaC1yc2EAAAADAQABAAABAQC3oj0NN9UL1dIfBP44JDsOj/bGX/DG/GIv82imhgWbCQvsKcPczb32+W+zVo+OF3mADX4EoBG681GGopjYCKLreo8D3nFSP/+kdAt0lEqbufzoLvSyyxa0RUHDwzVQIiMiNlzDiWqLRkF2TdeFDl5u+bbdPTYCGil5/qZ3Ro8sG9ayWXMxh+f+s0MAU9qFIwau838RF2R9OCMjmPodW/zf+Mcq+SqrbZyYfYha5jOWxoN8IdrGuAOQeYks7mrXC6qq5N9ojUtMKONvayFwNOsuC0U8PYUtukkHVnm2IK9KM1A38HDlV9eTF8ac7yCUHLlttmoIBdLUuLJAw72BQkK/
    groups:
      - sudo
  rsandell:
    ssh_keys:
      rsandell:
        key: AAAAB3NzaC1yc2EAAAADAQABAAACAQDwdnCxqQGMo1LTOhCDu7TpzT31sqJPYltmQEeKOut1lRP2HSn3Zac5XKXKq2Vn9xlmjSayC6mQcUw23x8VGa2bnCqWTxiAGSpAmcE4dZFRf/T20Il8YiuYNyP+Pl8zLOisOWMQ6XU6F//yoNeE+y1rnOolK0AHmO7/vz6FlnvM/pn5jSuHj+sicBdR5sA+wfejSkvW1Z3wH3vpa4xNFkS8nNjrC/Qv7rj+WmBxYMd4z7M5NFadfH1byH7omRLUZ2XNi6cDOY4g0+qbpwSmzs+JLTXa10uIMn9dcA3WOQDcBlYdQ0FSwsSYJy6jskf2A62yHJ3TESnNGis9o19AEGsVFxPo1aXdLJ5X9jEogjOX5CKK2kchpONaQoX7nh04ys5at8jzcn3B9KvSfx8B6UFlsvOHZOKlVNymZ+pe/JJecY08A4E/1Teo4wL4oVkBcMTbX2z04pXLbMtqELpzU29yeF5MRO1B37Jzf5E71TGWWxdllQ/WO+RTAInha1tLyujQoUop2EyZMFCvPtozVYIJpVV8hwQC1j4NyTnslmGaUd/3dyTVcnKKctDimGT+zULWE6ckCNwzsrIEY5ESERwa3JE5HtoEnolsddR5OQiVb4AImFz0Y4T3TvCQVFdhjs/1xjIRKsbg9eFzF2cy52GzTKDzcb9NQeRbPXPeLyZrBQ
    groups:
      - sudo
profile::jenkinscontroller::anonymous_access: true
profile::jenkinscontroller::admin_ldap_groups:
  - admins
  - jenkins-admins
profile::jenkinscontroller::ci_fqdn: 'ci.jenkins.io'
profile::jenkinscontroller::ci_resource_domain: 'assets.ci.jenkins.io'
profile::jenkinscontroller::letsencrypt: true
profile::jenkinscontroller::docker_image: 'jenkins/jenkins'
profile::jenkinscontroller::docker_tag: 'lts-jdk11'
profile::jenkinscontroller::groovy_init_enabled: true
profile::jenkinscontroller::block_remote_access_api: true
profile::jenkinscontroller::groovy_d_lock_down_jenkins: 'present'
profile::jenkinscontroller::groovy_d_set_up_git: 'present'
profile::jenkinscontroller::memory_limit: '30g'
profile::jenkinscontroller::jcasc:
  enabled: true
  reload_token: ENC[PKCS7,MIIBiQYJKoZIhvcNAQcDoIIBejCCAXYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAywKTuF4pmWjFgHZyW+wo4D5MDYRf7gVelgeLcIsZJy8t+Sw17vWA96vGIaAD2tklGILSn6snhskSYroQHkdv13gQGW1zcpP5N9wqhMOoA5nXrh9Gnb1F5JlPGlQyUxTA5gi+zjV8+B6athfjpKbkvK91RDkOPMMOkqBALp5E1xlsBpicri5Q1znik9shGPzccONvRw+wWsm0jPquoEdO1EnR17yqN60BOk1ZelY3AV9grLR6OZrRg8M6hl4JcI5SMfm9XUPB0BWQhHwZHlIW8sAmnR9aC7bsCEk16DH82V/HrBaJBYa8GiAr3LBFzy2jiNB0F/oK7XdVsN8AQyW6UjBMBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBDf4FrZNE5uqT3JiM8XUcSRgCCf8HyZFe7GPU+5puax+7Q50f+jT99rOmyBZg20AQTJeQ==]
  tools:
    groovy:
      groovy: # Default version is named "groovy"
        version: "2.4.7"
    jdk:
      jdk8:
        installers:
          linux-arm64:
            type: "zip"
            label: "linux && arm64"
            cpu_arch: "aarch64"
      jdk11:
        installers:
          linux-arm64:
            type: "zip"
            label: "linux && arm64"
            cpu_arch: "aarch64"
          s390x:
            type: "zip"
            label: "s390x"
            cpu_arch: "s390x"
      jdk17:
        installers:
          linux-arm64:
            type: "zip"
            label: "linux && arm64"
            cpu_arch: "aarch64"
          s390x:
            type: "zip"
            label: "s390x"
            cpu_arch: "s390x"
      jdk19:
        installers:
          linux-arm64:
            type: "zip"
            label: "linux && arm64"
            cpu_arch: "aarch64"
          s390x:
            type: "zip"
            label: "s390x"
            cpu_arch: "s390x"
  permanent_agents:
    s390x-agent:
      remoteFS: /home/jenkins/agent
      labels:
        - s390x
        - s390xdocker
      mode: EXCLUSIVE
      ssh:
        host: "148.100.84.76"
        credentialsId: "jenkins-s390x"
        hostKey: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIaGnnWz9Q/MvlscCUZslFxH8JJ01OQ6FXyuQMQWVuNe"
      envVars:
        PATH+MAVEN: "/home/jenkins/tools/apache-maven-3.9.0/bin"
        JAVA_HOME: "/opt/jdk-11"
        # For the permanent agents, we're using the artifact caching proxy on DigitalOcean (bandwith available)
        ARTIFACT_CACHING_PROXY_PROVIDER: "do"
      toolLocation:
        - home: "/home/jenkins/tools/apache-maven-3.9.0"
          key: "hudson.tasks.Maven$MavenInstallation$DescriptorImpl@mvn"
  cloud_agents:
    kubernetes:
      cik8s:
        enabled: true
        provider: "aws"
        credentialsId: "cik8s-jenkins-agent-sa-token"
        serverCertificate: >
          ENC[PKCS7,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
          x8Z1xU]
        ## TODO: Temp. capacity reduction as per https://github.com/jenkins-infra/helpdesk/issues/3421#issuecomment-1477559811
        max_capacity: 30 # Max 10 workers (16 CPU / 32 G) with 3 pods (3*4 CPU / 3*8G) each
        # max_capacity: 150 # Max 50 workers (16 CPU / 32 G) with 3 pods (3*4 CPU / 3*8G) each
        url: ENC[PKCS7,MIIBuQYJKoZIhvcNAQcDoIIBqjCCAaYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAnPRdxpD9DpARlMqoylNtQBFWxBe3r2BBWM5kLNkttc26pxzUgbzfje/C+dOSmGn83S/mkimDFRVTjMft9/mIF5L9m2QbyXLKt630KBUPyFc1KZcfllrcaMtad+VZkv1cieLvb+iD1u4BhdFxsmG3SfaqFob9JWJdzRGCqAkvaIPg5Vdl5TzURbYTiHyrpNnrxP2vZOZQfbwq5cQmf1sf/k2aSinBm6g/BNt8cwxBex0tup16A9m7imOla5JxJiYtAEz6gY9HZBCHV301eB4SD2taX61aYPRpoh01K3qtYgDvb6LnaoUZEtsDNUkN/sRVwY/1HxcfisM4i7kcjk/3CTB8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCK4mBTIaoCPJLfyQgJK4lfgFAyEO52eHBCPBz+ZDSvYhDxzKYo+ibl51dcJcp020b6jyJQwsNoD2Sq1Ahsz5Xs+t9DP/9PILukolb32tM9rK1kbz+Iry2hzixHUjE6idmJZA==]
        agent_definitions:
          - name: jnlp-maven-8
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-8
            labels:
              - maven
              - maven-8
              - jdk8
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-maven-11
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-11
            labels:
              - maven-11
              - jdk11
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-maven-17
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-17
            labels:
              - maven-17
              - jdk17
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-maven-19
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-19
            labels:
              - maven-19
              - jdk19
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-webbuilder
            agentJavaBin: /opt/java/openjdk/bin/java
            cpus: 4
            memory: 8
            labels:
              - node
              - ruby
              - webbuilder
            imagePullSecrets: dockerhub-credential
          - name: jnlp
            labels:
              - default
            cpus: 1
            memory: 1
            imagePullSecrets: dockerhub-credential
      doks:
        enabled: true
        provider: do
        credentialsId: "doks-jenkins-agent-sa-token"
        serverCertificate: >
          ENC[PKCS7,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
          jbvFaVW+RV5IW/]
        max_capacity: 150 # Max 50 workers (16 CPU / 32 G) with 3 pods (3*4 CPU / 3*8G) each
        url: ENC[PKCS7,MIIBuQYJKoZIhvcNAQcDoIIBqjCCAaYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAc6NOxZbHKCrW0RtsyuKr+nWLkQe5373QWJyENhn2potG95WHOAMXIvptK4TVmj5+AUz05uv7rnji01I+c8RYFpdu7J3dEczLsUdCY9QMTtFngz7Z/GpXAszorvEobocOQdVWzw4Rg7jncJuNI1JfiMIA9KcVYOISuyF6VEQajb/ACcyDBeYoLD7K3V6uTDIDrChCvW0FvmYDFPhxt0TheX6AxWI/9/1DzCYdz8yvOtxiSAdXOvZ87yM58OdyRotzjRCX+5E2VhxyyJdI+myfoU3DKP1H1tAuOIBdubq8OZJaZv2SQTC/BVLTIl0Wr43kKhE3kg2UOcMUypIuGcmzvDB8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCLrMYKsCzYfbJk8jdLB+5WgFBuB88xQ38Pl6SjAdHgCJxgwm0Ty9pFtJ/5OubJ9UaKrZfQtI9HmGkzIr8wq5CWPjPQ3ZZ9r7TIJBWITnOnFQWiUODb+x79K1SXa5US343uKg==]
        agent_definitions:
          - name: jnlp-maven-8
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-8
            labels:
              - maven
              - maven-8
              - jdk8
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-maven-11
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-11
            labels:
              - maven-11
              - jdk11
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-maven-17
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-17
            labels:
              - maven-17
              - jdk17
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-maven-19
            imageName: jnlp-maven-all-in-one
            javaHome: /opt/jdk-19
            labels:
              - maven-19
              - jdk19
            cpus: 4
            memory: 8
            imagePullSecrets: dockerhub-credential
          - name: jnlp-webbuilder
            agentJavaBin: /opt/java/openjdk/bin/java
            cpus: 4
            memory: 8
            labels:
              - node
              - ruby
              - webbuilder
            imagePullSecrets: dockerhub-credential
          - name: jnlp
            labels:
              - default
            cpus: 1
            memory: 1
            imagePullSecrets: dockerhub-credential
    ec2:
      aws-us-east-2:
        region: us-east-2
        credentialsId: "aws-credentials-jenkins-ci"
        sshKeysCredentialsId: "ec2-agent-ssh-2021-06"
        agent_definitions:
          - description: "ARM64 ubuntu 20.04"
            maxInstances: 5
            instanceType: A1Xlarge # 4 vCPUs / 8 Gb
            os: "ubuntu"
            os_version: "20.04"
            architecture: "arm64"
            labels:
              - ubuntu
              - arm64docker
              - arm64linux
            useAsMuchAsPossible: false
            spot: true
            userData: &BootstrapDatadogScript
              - "#!/bin/bash"
              - "set -eux"
              - echo "START CLOUDINIT"
              - "sed 's/api_key:.*/api_key: ENC[PKCS7,MIIBmQYJKoZIhvcNAQcDoIIBijCCAYYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAW9BiXpCNMlAH54d0IZ1/gXtl3GE0h5EiwhaIweCD4fXb9EPE7K5BAhBX2U531nOZ/sbMemXv15WTk36bJa1cjSCj798+w2pYGwHCje1LDjrtIsTdJ7Dw7bb+yOf4hGy+ftTecStAlel+yTL0YHRvIoiCDUCq7WtsjeYgQQa7lG/B3ZuFMlecCXP+/l42/VXmxUJUwheHKplKT4pPDCjAVk71zftJ0LKJtyQl0sSb0s3KBh25Xm8FbLb7ivMzRl3HSuwg+KHugU2dl1wi4jB/bEmDnIlaCNaIeVoXPKT6ncpB/hRR0UHAt8SEylUPoUq8Zv93dhakANb08702gq2o4TBcBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBA9W77G8ItivOxMmWZ59Sd+gDDQBGi6BayDGIx9W72gXXr+vcUgWt++jt7LqxQvGqr4lP0jb+gFdnRmeDmltPm/dWo=]/' /etc/datadog-agent/datadog.yaml.example > /etc/datadog-agent/datadog.yaml"
              - "sed -i 's/# site:.*/site: datadoghq.com/' /etc/datadog-agent/datadog.yaml"
              - systemctl stop datadog-agent.service
              - mkdir -p /var/log/datadog /etc/datadog-agent
              - chown dd-agent:dd-agent /etc/datadog-agent/datadog.yaml
              - chmod 640 /etc/datadog-agent/datadog.yaml
              - chown dd-agent:dd-agent /var/log/datadog
              - chmod 770 /var/log/datadog
              - systemctl start datadog-agent.service
              - rm -f /etc/sudoers.d/90-cloud-init-users
              - echo "END CLOUDINIT"
    azure-vm-agents:
      azureCredentialsId: "azure-credentials"
      resource_group: eastus-cijenkinsio
      agent_definitions:
        - name: "ubuntu-20"
          description: "Ubuntu 20.04 LTS"
          imageDefinition: jenkins-agent-ubuntu-20.04
          os: "ubuntu"
          os_version: "20.04"
          storageAccount: ENC[PKCS7,MIIBiQYJKoZIhvcNAQcDoIIBejCCAXYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAXcLW9OnUwAhARiFS6P8vg8YrfYj9DHXTJmXqp+U/Ytjeova0bH/C8bhEbOykV4nJLMReHrrfEu5Jx+Eg+wjfq7LGD4bkAsp3covik/lkxAEDiMACIU3mWGlgeQ+0Tf4tpEHDOlWXNiA33T+3Knr1/v4H4vQOWC63tASAUUIPys2sesrv4RilEqKTd39oT9ugsQDVhftEHbp4eaqmI9zTXpU5hvy2fpJp5F2b5o7ohNvdRsovrsbN7XWJvMxvRbg/YMK/yq3zdowBzUFqXRcmiNC7T2iV0/lNjKKJOV1j4y0VDQoMomOZ5+zrozDq44FhwtAXRHJMyHr8lhtYZth0PTBMBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBVFqN/yr2UmCADos0nCHO7gCC7w2deUgakcUIXAZ7Y1M+Y3+dGENY/F2cNkceceJpQhw==]
          location: "East US 2"
          instanceType: Standard_D4s_v3 # 4 vCPUS / 16 Gb
          architecture: amd64
          labels:
            - ubuntu
            - java
            - linux
            - docker
            - linux-amd64
          maxInstances: 10
          useAsMuchAsPossible: true
          credentialsId: "jenkinsvmagents-userpass"
          usePrivateIP: true
          virtualNetworkName: "prod-jenkins-public-prod"
          virtualNetworkResourceGroupName: "prod-jenkins-public-prod"
          subnetName: "ci.j-agents-vm"
          spot: true
          initScript: *BootstrapDatadogScript
        - name: "ubuntu-20-highmem"
          description: "Ubuntu 20.04 LTS Highmem"
          imageDefinition: jenkins-agent-ubuntu-20.04
          os: "ubuntu"
          os_version: "20.04"
          storageAccount: ENC[PKCS7,MIIBiQYJKoZIhvcNAQcDoIIBejCCAXYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAG/Diw4+KrBubbNNGJxe7yGXyJJUSSbhWIRXcLBYGPxo14g/jsZLqyoO7yW7mN36IUnByMnBhQemcp2gGXj7x4GXBwbrABRd4UhIJMfMoAaKjFktl2FQk1YRdgBFDmCd7+FeOSn4GsCG1w/IVSpN1ezlqBdVqiMuG3RSyEByVBHvLXBQLulGp/ZsKGoJkW2gFTLnjxSbpu3fB8Y2KtiZ6RT3IlfnGS5Yfhl9vBxTcxgzvRrjK2h6QjVFSz/r+unAhpPKZ8BPlFCQta7/HF1bzWE4G7fX+rYiNtTAH3aWdOlD/okMUlhzsByIzi74VFvHREFVOkD908Gds7kzMh3qptjBMBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBDg3jrltbTU6EQUsnrJ7+VRgCCtEzUFqD1vyGyzqY4dHdJpD1CrMKnVM/JW0AT+y6573g==]
          location: "East US 2"
          instanceType: Standard_D16s_v3 # 16 vCPUS / 64 Gb
          architecture: amd64
          labels:
            - ubuntu
            - highmem
            - highram
            - docker-highmem
            - linux-amd64-big
          maxInstances: 20
          useAsMuchAsPossible: false
          usePrivateIP: true
          credentialsId: "jenkinsvmagents-userpass"
          virtualNetworkName: "prod-jenkins-public-prod"
          virtualNetworkResourceGroupName: "prod-jenkins-public-prod"
          subnetName: "ci.j-agents-vm"
          spot: false
          initScript: *BootstrapDatadogScript
        - name: "win-2019" # The name must not contains "windows" or Azure API complains :facepalm:
          description: "Windows 2019"
          imageDefinition: jenkins-agent-windows-2019
          os: "windows"
          os_version: "2019"
          storageAccount: ENC[PKCS7,MIIBiQYJKoZIhvcNAQcDoIIBejCCAXYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAa3oGTsMY7PLE9o717wXQutJn5erhOYg2JV0KX1wR4JrAOBQ3d8DIdy7Uz60N/ANgEDZyrEgt2PYs51RYhtJV5OY5r7GxHecYj0fClGCkGVn+Zkz7SWLQlppK5QX3HaXFXwEXMvsn3CRZai8r2y6f0xxoVuEudih2eCxZ9ayq5CdOQYE3hXmGa6lXvpjpQTJpx1qwcyQRy/eieps4i3571pY8GYDQRkTdGKWrNpO7j59EgnEp64s+VRrSJuYHq+AqOPzA3DY8onnHCGg+uFFJ5W0ZtKDwj8hBHW8nKt7U0hURivHKbfr0S1mb9SDO5G5i/4OB6cIio6COS1pTsHbfSjBMBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBAKIIdotZJv1Gi79wx+4nFBgCCJXHclsURJelhh4ZScsLY7s1rrE+6qCUIDMOkDz7kaBw==]
          location: "East US 2"
          instanceType: Standard_D4s_v3 # 4 vCPUS / 16 Gb
          architecture: amd64
          labels:
            - docker-windows
            - docker-windows-2019
            - windows
          maxInstances: 20
          useAsMuchAsPossible: true
          credentialsId: "jenkinsvmagents-userpass"
          usePrivateIP: true
          virtualNetworkName: "prod-jenkins-public-prod"
          virtualNetworkResourceGroupName: "prod-jenkins-public-prod"
          subnetName: "ci.j-agents-vm"
          spot: false
          initScript:
            - "(Get-Content C:\\ProgramData\\Datadog\\datadog.yaml -Raw) -Replace 'api_key:', 'api_key: ENC[PKCS7,MIIBmQYJKoZIhvcNAQcDoIIBijCCAYYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAqyumVXNZAJylM6NiC/zKT+FKHqGnSwfUMWBupxumSJWL8GHEYFPB/Irr+sRiCPkRWW88bYg7Mp3Rv3qbxc0Aw/cU3XcQZB8RrAOsODBMjOJpHTvoB5aDtSYqygCjffPgwXK0DKguR2ADtsNkMcK7BOT02uaXgZOwo2S5UKkuDn6DsQBq9m1Ho8SwKw/E/+rwsUow+o5JVvPF9//8BIb53Y+wHYm2tOSe5dHFzBIP/+mJMHMpYiE5/q5LBELM9ZXhtBx2zeagEzbriDdlnDkMZk5AMWYz3+omDIX1MO2Fmg9Ak6O4dcNl4hhGJ5KtmPgLGzuhvfh018gi3NVhMBXv9zBcBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBltum5EYpT8EqN+vY0wudsgDBX++BA5bC+DpDxuqoANdKkUZdPyBo2cwxq8W4FfUtKE6ZReUIXxvARdR/Z2c5gYY4=]' | Set-Content C:\\ProgramData\\Datadog\\datadog.yaml"
        - name: "win-2022" # The name must not contains "windows" or Azure API complains :facepalm:
          description: "Windows 2022"
          imageDefinition: jenkins-agent-windows-2022
          os: "windows"
          os_version: "2022"
          storageAccount: ENC[PKCS7,MIIBiQYJKoZIhvcNAQcDoIIBejCCAXYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAa3oGTsMY7PLE9o717wXQutJn5erhOYg2JV0KX1wR4JrAOBQ3d8DIdy7Uz60N/ANgEDZyrEgt2PYs51RYhtJV5OY5r7GxHecYj0fClGCkGVn+Zkz7SWLQlppK5QX3HaXFXwEXMvsn3CRZai8r2y6f0xxoVuEudih2eCxZ9ayq5CdOQYE3hXmGa6lXvpjpQTJpx1qwcyQRy/eieps4i3571pY8GYDQRkTdGKWrNpO7j59EgnEp64s+VRrSJuYHq+AqOPzA3DY8onnHCGg+uFFJ5W0ZtKDwj8hBHW8nKt7U0hURivHKbfr0S1mb9SDO5G5i/4OB6cIio6COS1pTsHbfSjBMBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBAKIIdotZJv1Gi79wx+4nFBgCCJXHclsURJelhh4ZScsLY7s1rrE+6qCUIDMOkDz7kaBw==]
          location: "East US 2"
          instanceType: Standard_D4s_v3 # 4 vCPUS / 16 Gb
          architecture: amd64
          labels:
            - docker-windows-2022
          maxInstances: 20
          useAsMuchAsPossible: true
          credentialsId: "jenkinsvmagents-userpass"
          usePrivateIP: true
          virtualNetworkName: "prod-jenkins-public-prod"
          virtualNetworkResourceGroupName: "prod-jenkins-public-prod"
          subnetName: "ci.j-agents-vm"
          spot: false
          initScript:
            - "(Get-Content C:\\ProgramData\\Datadog\\datadog.yaml -Raw) -Replace 'api_key:', 'api_key: ENC[PKCS7,MIIBmQYJKoZIhvcNAQcDoIIBijCCAYYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAqyumVXNZAJylM6NiC/zKT+FKHqGnSwfUMWBupxumSJWL8GHEYFPB/Irr+sRiCPkRWW88bYg7Mp3Rv3qbxc0Aw/cU3XcQZB8RrAOsODBMjOJpHTvoB5aDtSYqygCjffPgwXK0DKguR2ADtsNkMcK7BOT02uaXgZOwo2S5UKkuDn6DsQBq9m1Ho8SwKw/E/+rwsUow+o5JVvPF9//8BIb53Y+wHYm2tOSe5dHFzBIP/+mJMHMpYiE5/q5LBELM9ZXhtBx2zeagEzbriDdlnDkMZk5AMWYz3+omDIX1MO2Fmg9Ak6O4dcNl4hhGJ5KtmPgLGzuhvfh018gi3NVhMBXv9zBcBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBltum5EYpT8EqN+vY0wudsgDBX++BA5bC+DpDxuqoANdKkUZdPyBo2cwxq8W4FfUtKE6ZReUIXxvARdR/Z2c5gYY4=]' | Set-Content C:\\ProgramData\\Datadog\\datadog.yaml"
    azure-container-agents:
      aci-windows:
        credentialsId: "azure-credentials"
        resource_group: eastus-cijenkinsio
        agent_definitions:
          - name: maven-8-windows
            os: windows
            command: 'pwsh.exe C:/ProgramData/Jenkins/jenkins-agent.ps1 -Url ^${rootUrl} -Secret ^${secret} -Name ^${nodeName}'
            cpus: 4
            memory: 8
            agentJavaBin: 'C:/openjdk-11/bin/java' # From image jenkins/inbound-agent:jdk11-nanoserver
            labels:
              - maven-windows
          - name: maven-11-windows
            os: windows
            command: 'pwsh.exe C:/ProgramData/Jenkins/jenkins-agent.ps1 -Url ^${rootUrl} -Secret ^${secret} -Name ^${nodeName}'
            cpus: 4
            memory: 8
            agentJavaBin: 'C:/openjdk-11/bin/java' # From image jenkins/inbound-agent:jdk11-nanoserver
            labels:
              - maven-11-windows
          - name: maven-17-windows
            os: windows
            command: 'pwsh.exe C:/ProgramData/Jenkins/jenkins-agent.ps1 -Url ^${rootUrl} -Secret ^${secret} -Name ^${nodeName}'
            cpus: 4
            memory: 8
            agentJavaBin: 'C:/openjdk-11/bin/java' # From image jenkins/inbound-agent:jdk11-nanoserver
            labels:
              - maven-17-windows
          - name: maven-19-windows
            os: windows
            command: 'pwsh.exe C:/ProgramData/Jenkins/jenkins-agent.ps1 -Url ^${rootUrl} -Secret ^${secret} -Name ^${nodeName}'
            cpus: 4
            memory: 8
            agentJavaBin: 'C:/openjdk-11/bin/java' # From image jenkins/inbound-agent:jdk11-nanoserver
            labels:
              - maven-19-windows
  artifact_caching_proxy:
    disabled: false
# These are plugins we need in our ci environment
profile::jenkinscontroller::plugins:
  - ansicolor # Provides ANSI color in the UI when checking log outputs
  - azure-container-agents # ACI agents
  - azure-vm-agents # Azure VM Agents
  - blueocean # A nice view for pipelines
  - buildtriggerbadge # Add an icon with the build cause in the build history
  - cloudbees-folder # Provides a job type "Folder"
  - code-coverage-api # Provides nice code covergae view in the Web UI (used by multiple downstream plugins)
  - config-file-provider # Used to provide Maven settings for proxies
  - configuration-as-code # Required for CasC
  - credentials # Provides Jenkins Credentials management
  - credentials-binding # Bind Jenbkins credentials to variables in jobs
  - docker-workflow # Provides the "withDockerContainer" pipelie keyword
  - ec2 # AWS EC2 VM agents
  - embeddable-build-status # https://github.com/jenkins-infra/helpdesk/issues/3013
  - git # Used for... git
  - github # Provides basic GitHub integration for jobs
  - github-checks # Allows GitHub Jobs to create checks in GitHub API
  - github-branch-source # Provides Job integration to get code from GitHub
  - generic-tool # Ligthweight tool definition (should replace 'groovy' plugin and tools)
  - groovy # TODO: remove in favor of generic-tool
  - kubernetes # Kubernetes Container Agents
  - jobConfigHistory # TODO: remove in favor of a configuration as code job definition (JobDSL?)
  - junit-attachments # Used by ATH
  - junit-realtime-test-reporter # Provides the 'realTimeJunit' keyword used by the ATH - https://github.com/jenkinsci/acceptance-test-harness/blob/1cfec809d04b2a098f769ff662320d0e873dfb9f/Jenkinsfile#L60
  - ldap # Required for authentication/authorization
  - lockable-resources # Provides the pipeline keyword 'lock'
  - mailer # Provides build notification by email
  - matrix-auth # Required for specifying authorization schemes for RBAC
  - parallel-test-executor # Provides the pipleine keyword "splitTest" used byt the Jenkins "ATH" - https://github.com/jenkinsci/acceptance-test-harness/blob/54adf0da5605e2caa4afc3f0b00fbc6191991e9a/Jenkinsfile#L32
  - pipeline-github # This plugin adds the following pipeline triggers: issueCommentTrigger, pullRequestReview
  - pipeline-graph-view # Candidate for replacing Blue Ocean use cases
  - pipeline-stage-view # Old but classic pipeline view
  - ssh-agent # SSH Agent to allow loading SSH credentials on a local agent for jobs
  - ssh-slaves # SSH Build Agent to implement "outbound agents"
  - timestamper # Allow showing timestamp on build logs
  - warnings-ng # Provides integration (UI, jobs) with static analyser and linters
  - workflow-aggregator # Meta-plugin to provide all workflow-(.*) standard plugins

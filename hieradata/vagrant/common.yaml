---
profile::robobutler::nick: hobobutler
profile::robobutler::password: ''

profile::buildmaster::docker_image: 'jenkins/jenkins'
profile::buildmaster::docker_tag: 'lts-jdk11'
profile::buildmaster::memory_limit: '1536m'

profile::buildmaster::jcasc:
  enabled: true
  custom_configs:
    - azure.ci.jenkins.io/agents.yaml.erb
  reload_token: SuperSecretThatShouldBeEncryptedInProduction
profile::buildmaster::cloud_agents:
  kubernetes:
    cik8s:
      max_capacity: 100 # Max 50 workers (8 CPU / 32 G) with 2 pods (4 CPU / 8G) each
      url: https://SuperSecretThatShouldBeEncryptedInProduction
      agent_definitions:
        - name: jnlp-ruby
          cpus: 2
          memory: 4
          labels:
            - ruby
        - name: jnlp-maven-8
          labels:
            - maven
            - maven-8
            - jdk8
          cpus: 4
          memory: 8
        - name: jnlp-maven-11
          labels:
            - maven-11
            - jdk11
          cpus: 4
          memory: 8
        - name: jnlp-node
          cpus: 2
          memory: 4
          labels:
            - node
        - name: jnlp-alpine
          cpus: 1
          memory: 2
          labels:
            - alpine
        - name: jnlp
          labels:
            - default
          cpus: 1
          memory: 1
  ec2:
    aws-us-east-2:
      region: us-east-2
      agent_definitions:
        - description: "Ubuntu 20.04 LTS"
          maxInstances: 5
          instanceType: T3Xlarge # 4 vCPUs / 16 Gb
          os: "ubuntu"
          architecture: "amd64"
          labels:
            - java
            - docker
            - linux
          useAsMuchAsPosible: true
        - description: "Windows 2019"
          maxInstances: 10
          instanceType: T3Xlarge # 4 vCPUs / 16 Gb
          os: "windows"
          architecture: "amd64"
          labels:
            - docker-windows
          useAsMuchAsPosible: true
        - description: "High memory ubuntu 20.04"
          maxInstances: 20
          instanceType: M54xlarge # 16 vCPUS / 64 Gb
          os: "ubuntu"
          architecture: "amd64"
          labels:
            - highmem
            - highram
            - docker-highmem
          useAsMuchAsPosible: false
        - description: "ARM64 ubuntu 20.04"
          maxInstances: 2
          instanceType: A1Xlarge # 4 vCPUs / 8 Gb
          os: "ubuntu"
          architecture: "arm64"
          labels:
            - arm64docker
            - linux
          useAsMuchAsPosible: false
  azure-vm-agents:
    resource_group: eastus-cijenkinsio
    agent_definitions:
      - name: "ubuntu-20"
        description: "Ubuntu 20.04 LTS"
        imageDefinition: jenkins-agent-ubuntu-20
        os: "ubuntu"
        storageAccount: SuperSecretThatShouldBeEncryptedInProduction
        location: "East US 2"
        instanceType: Standard_D4s_v3 # 4 vCPUS / 16 Gb
        architecture: amd64
        labels:
          - java
          - linux
          - docker
        idleTerminationMinutes: 5
        maxInstances: 10
        useAsMuchAsPosible: true
        usePrivateIP: true
        virtualNetworkName: "prod-jenkins-public-prod"
        virtualNetworkResourceGroupName: "prod-jenkins-public-prod"
        subnetName: "ci.j-agents-vm"
        osDiskSize: 90
        spot: true
      - name: "ubuntu-20-highmem"
        description: "Ubuntu 20.04 LTS Highmem"
        imageDefinition: jenkins-agent-ubuntu-20
        os: "ubuntu"
        storageAccount: SuperSecretThatShouldBeEncryptedInProduction
        location: "East US 2"
        instanceType: Standard_D16s_v3 # 16 vCPUS / 64 Gb
        architecture: amd64
        labels:
          - highmem
          - highram
          - docker-highmem
        idleTerminationMinutes: 5
        maxInstances: 10
        useAsMuchAsPosible: false
        usePrivateIP: false
        osDiskSize: 90
      - name: "win-2019" # The name must not contains "windows" or Azure API complains :facepalm:
        description: "Windows 2019"
        imageDefinition: jenkins-agent-windows-2019
        os: "windows"
        storageAccount: SuperSecretThatShouldBeEncryptedInProduction
        location: "East US 2"
        instanceType: Standard_D4s_v3 # 4 vCPUS / 16 Gb
        architecture: amd64
        labels:
          - docker-windows
        idleTerminationMinutes: 30
        maxInstances: 10
        useAsMuchAsPosible: true
        useEphemeralOSDisk: false
        osDiskSize: 90
  azure-container-agents:
    aci-windows:
      credentialsId: "azure-credentials"
      resource_group: eastus-cijenkinsio
      agent_definitions:
        - name: maven-8-windows
          os: windows
          command: 'pwsh.exe C:/ProgramData/Jenkins/jenkins-agent.ps1 -Url ^${rootUrl} -Secret ^${secret} -Name ^${nodeName}'
          cpus: 4
          memory: 8
          labels:
            - maven-windows
        - name: maven-11-windows
          os: windows
          command: 'pwsh.exe C:/ProgramData/Jenkins/jenkins-agent.ps1 -Url ^${rootUrl} -Secret ^${secret} -Name ^${nodeName}'
          cpus: 4
          memory: 8
          labels:
            - maven-11-windows
profile::buildmaster::plugins:
  - ansicolor
  - azure-container-agents
  - azure-vm-agents
  - blueocean
  - build-timeout
  - buildtriggerbadge
  - cloudbees-folder
  - code-coverage-api
  - configuration-as-code
  - credentials
  - credentials-binding
  - docker-workflow
  - ec2
  - embeddable-build-status
  - git-client
  - git
  - github
  - github-checks
  - github-branch-source
  - groovy
  - kubernetes
  - jobConfigHistory
  - ldap
  - lockable-resources
  - matrix-auth
  - parallel-test-executor
  - pipeline-stage-view
  - pipeline-utility-steps
  - ssh-agent
  - ssh-slaves # SSH Build Agent to implement "outbound agents"
  - throttle-concurrents
  - timestamper
  - toolenv
  - warnings-ng
  - workflow-aggregator
  - workflow-multibranch

docker::log_opt::max-size: '100m'
docker::log_opt::max-file: 2

profile::openvpn::auth_ldap_password: 's3cr3t'
profile::openvpn::auth_ldap_url: 'ldaps://ldap'

# Dumb Self Signed Certificate for testing purpose
profile::openvpn::openvpn_ca_pem: |
  -----BEGIN CERTIFICATE-----
  MIIDiTCCAnGgAwIBAgIUE5kg1FzG3S2HY3wmn+YKCBZddHIwDQYJKoZIhvcNAQEL
  BQAwVDELMAkGA1UEBhMCQkUxCzAJBgNVBAgMAioqMQswCQYDVQQHDAIqKjELMAkG
  A1UECgwCKioxCzAJBgNVBAMMAkNBMREwDwYJKoZIhvcNAQkBFgIqKjAeFw0xODEy
  MjIxMzAyMDhaFw0xOTEyMjIxMzAyMDhaMFQxCzAJBgNVBAYTAkJFMQswCQYDVQQI
  DAIqKjELMAkGA1UEBwwCKioxCzAJBgNVBAoMAioqMQswCQYDVQQDDAJDQTERMA8G
  CSqGSIb3DQEJARYCKiowggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDt
  ddnJMX1dzoZzzBBLeWoTqyPnPz+k+VOfi4SdxJZDBaKxuJNW7JqVq+T3PQTGtUza
  +pkXa0qD4hofCeOMAaKLj2DqcPJ8fHn7ERci6xVKd/zbSFo1C+KibFQjIVwi0MOw
  f07kxdUTWO7wUZCJICNAV6G7vHPhau2L5Of2IQWxRAtpv5GNsUTJsrS0l2Cgx0My
  4LbDefFLQnF1sIrC+A053xcgRoNGh/kyDAqCaO92zjiocHadMF88emCsAmb/KRr6
  a4i6LhV0jl1QP0xaVYRtZisM1k8Mf6+CHE225CDko3om7cMvAdkGrmPnbqKRJdij
  fI+/6Ua1IfdsaFb4/X8xAgMBAAGjUzBRMB0GA1UdDgQWBBRPHzMFkA6BJL5NEBIZ
  6QLzdBkHEDAfBgNVHSMEGDAWgBRPHzMFkA6BJL5NEBIZ6QLzdBkHEDAPBgNVHRMB
  Af8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQCH0DAFkghUsLH3pP/KeiCD+Ftq
  c6chnI3m33t8zsvSNfaY26SAaLm1ercMdmz5h5ah+FLkicnhlhoZPJGf7FS0rHKW
  FI8fAEYDaSuVD05j+t0AGzPcRZKbBN1I2hdu4ly5RTxKMeQTIJr/L52C1xaeWwqh
  SMPm90//R/FGWs+aB6X9MQPFW38QaV84kPnHfrVI3+i03ClQ4B8cOxKkRV760TB0
  lHs4wEPollV1oCwdUsNolOZyr+HdGmP4Lknoycul63ZsS1NAw7ibOluBN8YtsWW2
  +ARrNnxpk0YcjRS8vZCCm+QyQcl6SqfAAqmd4zQojfNONqW14SwKwzfX4rsA
  -----END CERTIFICATE-----

# Dumb Self Signed Certificate for testing purpose
profile::openvpn::openvpn_server_pem: |
  -----BEGIN CERTIFICATE-----
  MIIDMDCCAhgCFGXhX2+qymGO4kQ1BmlX+ALRP8g7MA0GCSqGSIb3DQEBCwUAMFQx
  CzAJBgNVBAYTAkJFMQswCQYDVQQIDAIqKjELMAkGA1UEBwwCKioxCzAJBgNVBAoM
  AioqMQswCQYDVQQDDAJDQTERMA8GCSqGSIb3DQEJARYCKiowHhcNMTgxMjIyMTMw
  MjA4WhcNMTkwMTIxMTMwMjA4WjBVMQswCQYDVQQGEwJCRTELMAkGA1UECAwCKiox
  CzAJBgNVBAcMAioqMQswCQYDVQQKDAIqKjEMMAoGA1UEAwwDdnBuMREwDwYJKoZI
  hvcNAQkBFgIqKjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAM43fnRx
  Mb8hcDBbqjZ4FIBzPxJLOHQ7XR3mFMLjiNSxgFT7zAFbV6NPj5k3u60Y4XEnAcOO
  4Oog4tTkpK93+JBBGWS/6EqZTzVPu26UEoi16JfLZ7rAuVcdPUOVq2XzeQUGRQII
  aB8nCrLMzHVWEGDMzDu8Fq9T7fNpAktir9omJI6a5moGFVSDLTJpskKFWvXYYF2+
  GXN7BsKqN4k2zQbldTdKq0xplbkgzbn/eIM0e7YTP09lnnkQSzXqaoM1t+XSGawC
  YxVOIUb3GETZJYZ+KFwyzgkpyNvM2VHNE7MaklggqmfM57HL+b3gc8Zzd+DPErRL
  ZY0MDysKwVRMOW0CAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAGNUSGbuQvnF8E7hr
  smCYDp+DhsDhko9odCL/KAHWQw3PR0qEvVe5tIykLDv/lc/3AkATXhhNmDrXduwc
  Mgs4K/db7Hsk8IFmOhKqBw8/CHrGJ+n/u7f45xTxpu5XeXsUGHNJOxa+dYu20186
  I6VQSN14YpQ75zQ4tFoWJlOMeJmomQ78YbBRszftAGQZGaR9P+6pbmkpLDo1gudG
  DiUt7X2fGqZ+w7cQxyuNLIeMITGIkQn+J/Ow5NBcXeL1AzMetBgoy4t94J6F0dHM
  HfvrHHBQRxwmTaDOc+0pnqFcRu+GCelUMtlpTTfCCR5qYIeGgPB2LtPqpW/XHRMP
  4ZlfnQ==
  -----END CERTIFICATE-----

# Dumb Private Key for testing purpose
profile::openvpn::openvpn_server_key: |
  -----BEGIN PRIVATE KEY-----
  MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDON350cTG/IXAw
  W6o2eBSAcz8SSzh0O10d5hTC44jUsYBU+8wBW1ejT4+ZN7utGOFxJwHDjuDqIOLU
  5KSvd/iQQRlkv+hKmU81T7tulBKIteiXy2e6wLlXHT1Dlatl83kFBkUCCGgfJwqy
  zMx1VhBgzMw7vBavU+3zaQJLYq/aJiSOmuZqBhVUgy0yabJChVr12GBdvhlzewbC
  qjeJNs0G5XU3SqtMaZW5IM25/3iDNHu2Ez9PZZ55EEs16mqDNbfl0hmsAmMVTiFG
  9xhE2SWGfihcMs4JKcjbzNlRzROzGpJYIKpnzOexy/m94HPGc3fgzxK0S2WNDA8r
  CsFUTDltAgMBAAECggEAKGFDeMelhxikIEQCy5Gt6g0nH4ztLA1nyXABRrxJUeTE
  DWAU7XsWaRsuMkFwlY+WrZKGzOVQc2gnIqr2+IkUeiLVNx5A/UKR+Q141UlXa7+7
  IOYqlK4iXMWT9oT7QAZx/yLgJmrBAMCjXqmtq5hDssDHiTbmdkSIBq7cTSiw6JVP
  M+nkmv9Qrv3Y/lQLJF7KKCWVOcWm7uQwN8jiLPLzeRSS8xLSlgKedmWkIjskpLkE
  3vvr8NoLAUTLq/dnO5Igj0cMKS2mGKlN46aDlkd7EopY13kABLHKfSSWst9bGfYD
  7kBQaXA1S9Nj67tMhUZfSwB6JrXb2wK/IeWuH5N04QKBgQD45N5B1dpZzEIYIhez
  r+R0Dosu/OpG6zsBQmLbg2WMN4LGfbgFD+oPL8myY6IBEF/IpStTuG8RXeP8v1x8
  J0NKkkc3SDjYLPIjcoLShAf8TlRQoGZCNdi1r3D0wSb8XVgMElboMSlzHTqzJTpG
  OdPCuvmWez56QOWQ6xJ91MqYmQKBgQDUGrQnhf0tz71DLmwElsd41B2/bMdwsY+n
  bJZlgGs1MwwvVyGWcL1G4VntzB2xip3E64GqV6qmVbnh97Mw6Ho7/EZ97J5J45qE
  8UWWjIzo8dYcZnE2O3O4zr0gFRYVO+yUCCRkR9JhNaiPkNMtR04Bw0XK6o1588lA
  LVJUv5wH9QKBgQC3HtyPn6HpE6lFTEAYCj+RS+oHhjlwOD3PbWKCkygxg94J4BF2
  WAEjb0t8nmVhVwTCARPhov7EzkmhecG37sNJqFoRSGfaVSdKAURTUqT1c0QBliHm
  cOuisRPwX/QpFRxktVGPwCv47/ZyO9+mL4Gn8h0UJFURaZH9j5apUdhFcQKBgEei
  dTHcCPQN80fbR9QM8HWYfiuGm50t+ux6uhix1IN1KCpc7RUYInTr6ylrBKRPwpUd
  TP+w+AuRbGQq+jQMcCwOOeiRn6wo2KkJq4z7DyQleUDCQH4meiDygeFx/bFSOcaN
  MW1E7IK0UqeaLBhgurHRt6KesQV9Fn08UVAaHqJ5AoGBALEqZxgPJnUMwbPKDzRt
  YYd1C0nfZ3edeoSaJuCLU1qUWcuqxhFbGRIhT9MvXhStDKljDH3efXdpVyhIT+RI
  yEkzrvH9HyTiaK2dzJuq0rItU2rHYz/sckafpwtwRjxEffIcBcJh0L5JlU6yYBzP
  fbID8N632RFEBJgAg02JhYW0
  -----END PRIVATE KEY-----

# Dumb dh certificate for testing purpose
profile::openvpn::openvpn_dh_pem: |
  -----BEGIN DH PARAMETERS-----
  MIIBCAKCAQEA85Md0iWYllvKYyO5Xe2yNLgzEyWhUw56ol5kVbrQVchT4yAU4Jkp
  pXcrXnyhn/J1wlhFg3zUdesYNoeNYH9LeRUTFddh8h6Qbwb6DbK6MZu89uSL2hHn
  7wLZOjpkRoIxHzN6nMBj6cpryVi15GJgXT4CDzBvHtDYFd+m9XA2OJoMauZBOB2F
  uUVGZRHott7G+f4ooi3iXkHArJEllyavDFL2wuTgsD9IMEN+UBt4MAiJbDiNnNYT
  M/5EwDFZREQ3tx2xol8uTbnfuIm/OQKW1OqmFKvNCwF8I7SdK9pIHHAyPBNe37vw
  KylZSP3kLe6g3qpUb82MTsYNIDUz5XQ7UwIBAg==
  -----END DH PARAMETERS-----

accounts:
  atlassian:
    groups:
      - atlassian-admins

letsencrypt::config::server: "https://acme-staging.api.letsencrypt.org/directory"

ssl_legacy_key: |
  -----BEGIN RSA PRIVATE KEY-----
  MIICXAIBAAKBgQCw/CwMBPVJtUbvtJY7XxrwN0o5Bkus3U2E9AuZR7Ge4Ap5xQmh
  oEE2ZjBCKTKELtcwATvFZJD9R8kBqU6dVp8S0wd1rnZSBpUu7uGgal/ZFth4Qx8L
  S7zpRC3nNR3Wp4vSUwpQiYdaPy+g2s38eABdd1OmfAiVfwPyQFA6FgiuvQIDAQAB
  AoGAefTKxV2FSM1JnFPsUe0vOuhelPzpmKzGhh9E/tKQatInZdGI2X78cOfpyS1q
  Sfuc/M9cyKCL6HxW3nY0XecapVBYg+Cxz1UmqmnFkgyLvBNbJVrSL5QdHHcSkl8l
  Mw9e2oMnTI3+EGl2Gfxv54r2Ph0K10td49/5GUErgBpe5AECQQDgCKul1heoMCkd
  mPhbxziLvu/Hm88MEsMTEZTlaQDxQ18iwUZIi/X05TUp0qO/VFEBNS6jqW7aa5+Q
  oycP8ElhAkEAyjzwnpxrIC+aYZZRsulNDzVUHWoNdQ9pgz6kqC+4b3sj83X7wdn6
  WwiB/TRIj4HGyQ76sJIJrS7sRfvimisW3QJAOcICfr6zWqkP8JF/dinmaiDPsKZ6
  uqIbqM7flEV9+LVl0ZACjrGGt5xgGGg1zx3txGHxpEAKVEVq3d8yMunAAQJBAJRR
  nSa2ENrKDq8DT2enMpy0v7vSy4vOgdN/XcL7PIiGBxfGr5y8AKBC3RKWBaE5zFAo
  bDKS6AXbI+0vjkEC2QECQGfRo2BX8T/AJtuTgaqKe6fJa256sb2UBQ94gHTM+g3g
  9nkx0A60UEtCdY+Rv2DCgYxF3/S4cxKH7UQngwzs2KM=
  -----END RSA PRIVATE KEY-----

ssl_legacy_cert: |
  -----BEGIN CERTIFICATE-----
  MIICNTCCAZ4CCQCiU0dd09lCwzANBgkqhkiG9w0BAQsFADBfMQswCQYDVQQGEwJB
  VTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0
  cyBQdHkgTHRkMRgwFgYDVQQDDA9sZGFwLmplbmtpbnMuaW8wHhcNMTYwNDIyMTg0
  NzAwWhcNMTcwNDIyMTg0NzAwWjBfMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29t
  ZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMRgwFgYD
  VQQDDA9sZGFwLmplbmtpbnMuaW8wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGB
  ALD8LAwE9Um1Ru+0ljtfGvA3SjkGS6zdTYT0C5lHsZ7gCnnFCaGgQTZmMEIpMoQu
  1zABO8VkkP1HyQGpTp1WnxLTB3WudlIGlS7u4aBqX9kW2HhDHwtLvOlELec1Hdan
  i9JTClCJh1o/L6Dazfx4AF13U6Z8CJV/A/JAUDoWCK69AgMBAAEwDQYJKoZIhvcN
  AQELBQADgYEApCL0MOYHTNdyVFGE26KiadvxH0ZMg6nIUsrUnItg1WDDbfP1d0ZQ
  V2jdQ4Az32SGom/DVzkpwK7K/FrUqJInNAoTSnj2Brh8EklOW2rGygqXEHuRp0Jb
  u4DZf96/Ff36Ir0Inkdu+8EspUiRu+AwJvIn7elZSFm6dm9E8ouAWQI=
  -----END CERTIFICATE-----

ssl_legacy_chain: |
  -----BEGIN CERTIFICATE-----
  MIICNTCCAZ4CCQCiU0dd09lCwzANBgkqhkiG9w0BAQsFADBfMQswCQYDVQQGEwJB
  VTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0
  cyBQdHkgTHRkMRgwFgYDVQQDDA9sZGFwLmplbmtpbnMuaW8wHhcNMTYwNDIyMTg0
  NzAwWhcNMTcwNDIyMTg0NzAwWjBfMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29t
  ZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMRgwFgYD
  VQQDDA9sZGFwLmplbmtpbnMuaW8wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGB
  ALD8LAwE9Um1Ru+0ljtfGvA3SjkGS6zdTYT0C5lHsZ7gCnnFCaGgQTZmMEIpMoQu
  1zABO8VkkP1HyQGpTp1WnxLTB3WudlIGlS7u4aBqX9kW2HhDHwtLvOlELec1Hdan
  i9JTClCJh1o/L6Dazfx4AF13U6Z8CJV/A/JAUDoWCK69AgMBAAEwDQYJKoZIhvcN
  AQELBQADgYEApCL0MOYHTNdyVFGE26KiadvxH0ZMg6nIUsrUnItg1WDDbfP1d0ZQ
  V2jdQ4Az32SGom/DVzkpwK7K/FrUqJInNAoTSnj2Brh8EklOW2rGygqXEHuRp0Jb
  u4DZf96/Ff36Ir0Inkdu+8EspUiRu+AwJvIn7elZSFm6dm9E8ouAWQI=
  -----END CERTIFICATE-----

# vim: ft=yaml ts=2 sw=2 nowrap et

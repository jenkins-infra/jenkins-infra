network:
    version: 2
    ethernets:
    <%- if @networks && !networks.empty? -%>
      <%- @networks.each do |interface, config| -%>
        <%= @interface %>:
            dhcp4: true
            dhcp4-overrides:
                route-metric: <%= @config["route-metric"] %>
            dhcp6: false
            match:
                driver: hv_netvsc
                macaddress: <%= @config["macaddress"] %>
            set-name: <%= @interface %>
      <%- end -%>
    <%- end -%>
